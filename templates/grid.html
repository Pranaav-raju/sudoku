{% extends "index.html" %}
{% block head %}
<link href='https://fonts.googleapis.com/css?family=ABeeZee' rel='stylesheet'>
<style type="text/css">

body {
  font-family: 'ABeeZee'; font-size: 22px;
}

form {
  /* Remove spaces between boxes on a line */
  font-size: 0px;
}

h1 {
  font-size: 30px;
  margin-top: 10%;
}

div.puzzle, div.text {
  display: inline;
  font-size: 20px;
}

div.puzzle {
  float: left;
  width: 40%;
}

div.submit {
    background-color: #00b33c;
    border-radius: 15px;
    width: 20%;
    margin: auto;
    top: 50%;
    padding: 10px 0;
    font-size: 1.5em;
    text-align: center;
    color: floralwhite;
}

div.submit:hover {
    background-color: rgb(74, 74, 206);
}

div.text {
  float: right;
  margin-top: 10%;
  text-align: center;
  width: 60%;
  margin-right: auto;
}

.grid-container {
  display: inline-grid;
  grid-template-columns: auto auto auto;
  margin: auto;
  background-color: #FFFFFF;
  border: 3px solid rgba(72, 33, 214, 0.8);
}

.grid-item {
  display: inline-grid;
  border: 1px solid rgba(0, 0, 0, 0.8);
  text-align: center;
}

input[type=text] {
    text-align: center;
    padding: 8px;
    width: 30px;
    font-size: 35px;
    font-family: 'ABeeZee';
    background-color: rgba(255, 255, 255, 0.8);
}

input[type=text]:focus {
    background-color: yellow;
}

input:invalid {
  border: 2px solid red;
}

input:valid {
  border: 2px solid black;
}

textarea {
    resize: none;
}

</style>

{% endblock %}
{% block grid %}
  <!-- Cells will get created a single box at a time, so list by box -->
  {% set top_row = [["00", "01", "02", "10", "11", "12", "20", "21", "22"],
                   ["03", "04", "05", "13", "14", "15", "23", "24", "25"],
                   ["06", "07", "08", "16", "17", "18", "26", "27", "28"]] -%}
  {% set middle_row = [["30", "31", "32", "40", "41", "42", "50", "51", "52"],
                      ["33", "34", "35", "43", "44", "45", "53", "54", "55"],
                      ["36", "37", "38", "46", "47", "48", "56", "57", "58"]] -%}
  {% set bottom_row = [["60", "61", "62", "70", "71", "72", "80", "81", "82"],
                      ["63", "64", "65", "73", "74", "75", "83", "84", "85"],
                      ["66", "67", "68", "76", "77", "78", "86", "87", "88"]] -%}
  <!-- Next cell to move to after typing in each cell. Typing across the row seems most natural. -->
  {%- set next_cell = {
                        '00':'01', '01':'02', '02':'03', '03':'04', '04':'05', '05':'06', '06':'07', '07':'08', '08':'10',
                        '10':'11', '11':'12', '12':'13', '13':'14', '14':'15', '15':'16', '16':'17', '17':'18', '18':'20',
                        '20':'21', '21':'22', '22':'23', '23':'24', '24':'25', '25':'26', '26':'27', '27':'28', '28':'30',
                        '30':'31', '31':'32', '32':'33', '33':'34', '34':'35', '35':'36', '36':'37', '37':'38', '38':'40',
                        '40':'41', '41':'42', '42':'43', '43':'44', '44':'45', '45':'46', '46':'47', '47':'48', '48':'50',
                        '50':'51', '51':'52', '52':'53', '53':'54', '54':'55', '55':'56', '56':'57', '57':'58', '58':'60',
                        '60':'61', '61':'62', '62':'63', '63':'64', '64':'65', '65':'66', '66':'67', '67':'68', '68':'70',
                        '70':'71', '71':'72', '72':'73', '73':'74', '74':'75', '75':'76', '76':'77', '77':'78', '78':'80',
                        '80':'81', '81':'82', '82':'83', '83':'84', '84':'85', '85':'86', '86':'87', '87':'88'
                     }
      -%}
  <form name="puzzle" id="puzzle"><meta id="puzzle" data-input={{puzzle_string}}><div class="puzzle">
    {% for row in [top_row, middle_row, bottom_row] %}
      {% for box in row %}
      <div class="grid-container">
          {% for cell in box %}
              <div class="grid-item">
                <meta id={{cell}} data-next={{next_cell[cell]}}>
                <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
                <script src="static/sudoku.js"></script>
                <input type="text" name={{ cell }} onkeyup="check(this, name)"
                       maxlength="1" {% if cell == "00" %} autofocus {% endif %} >
              </div>
          {%- endfor %}
      </div>
      {%- endfor %}
      <!-- Put every row on a new line-->
    </br>
  {% endfor %}
  </div>
  <div class="text">
      <h1>Here is a simple Sudoku solver!</h1>
      {% if error is defined and error != '' %}
      <p>{{ error|safe }}</p>
      {% else %}
      Enter the numbers of the puzzle here.</p>
      {% endif %}
      <p><div id="submitButton" class="submit" onclick="submitForm(puzzle)">Submit</div>
      </div>
{% endblock %}